name = "codeseek-site"
main = "src/index.js"
compatibility_date = "2024-03-18"
workers_dev = true

[vars]
# 严格限制允许的来源域名
ALLOWED_ORIGINS = "https://codeseek.pp.ua,https://www.codeseek.pp.ua"
ENVIRONMENT = "production"
DEBUG = "false"

# 额外的代理目标白名单（可选，补充代码中的硬编码列表）
EXTRA_PROXY_TARGETS = ""

# 通用代理配置（支持动态路由）
[[env.production]]
name = "codeseek-site"
[env.production.vars]
ALLOWED_ORIGINS = "https://codeseek.pp.ua"
ENVIRONMENT = "production"
DEBUG = "false"
# 可以根据需要添加特定的额外目标
EXTRA_PROXY_TARGETS = ""

# 开发环境配置
[[env.development]]
name = "codeseek-site-dev"
[env.development.vars]
ALLOWED_ORIGINS = "http://localhost:3000,https://localhost:3000,https://codeseek.pp.ua"
ENVIRONMENT = "development" 
DEBUG = "true"
EXTRA_PROXY_TARGETS = "example.com,test.com"

# JavBus 专用代理环境（如果需要专门的实例）
[[env.javbus]]
name = "proxy-javbus"
[env.javbus.vars]
PROXY_HOSTNAME = "www.javbus.com"
PROXY_PROTOCOL = "https"
ALLOWED_ORIGINS = "https://codeseek.pp.ua"
ENVIRONMENT = "production"
DEBUG = "false"

# JavDB 专用代理环境
[[env.javdb]] 
name = "proxy-javdb"
[env.javdb.vars]
PROXY_HOSTNAME = "javdb.com"
PROXY_PROTOCOL = "https"
ALLOWED_ORIGINS = "https://codeseek.pp.ua"
ENVIRONMENT = "production"
DEBUG = "false"

# JavLibrary 专用代理环境
[[env.javlibrary]]
name = "proxy-javlibrary"
[env.javlibrary.vars]
PROXY_HOSTNAME = "www.javlibrary.com"
PROXY_PROTOCOL = "https"
ALLOWED_ORIGINS = "https://codeseek.pp.ua"
ENVIRONMENT = "production"
DEBUG = "false"

# 多地区代理配置
[[env.us]]
name = "codeseek-proxy-us"
[env.us.vars]
ALLOWED_ORIGINS = "https://codeseek.pp.ua"
ENVIRONMENT = "production"
DEBUG = "false"
REGION_PREFERENCE = "US"

[[env.eu]]
name = "codeseek-proxy-eu"  
[env.eu.vars]
ALLOWED_ORIGINS = "https://codeseek.pp.ua"
ENVIRONMENT = "production"
DEBUG = "false"
REGION_PREFERENCE = "EU"

[[env.asia]]
name = "codeseek-proxy-asia"
[env.asia.vars]
ALLOWED_ORIGINS = "https://codeseek.pp.ua"
ENVIRONMENT = "production" 
DEBUG = "false"
REGION_PREFERENCE = "ASIA"