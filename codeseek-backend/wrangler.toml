name = "codeseek-backend"
main = "src/index.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
preview_urls = false  

[vars]
# 应用版本信息
APP_VERSION = "2.1.0"

# 用户注册相关配置
ALLOW_REGISTRATION = "true"                    # 是否允许新用户注册
MAX_FAVORITES_PER_USER = "1000"                # 每个用户最大收藏数量限制
MAX_HISTORY_PER_USER = "1000"                  # 每个用户最大搜索历史记录数量限制
MAX_TAGS_PER_USER = "50"                       # 每个用户最大可创建标签数量限制
COMMUNITY_MAX_SHARES_PER_USER = "50"           # 社区中每个用户最大分享搜索源数量限制

# 系统行为日志配置
ENABLE_ACTION_LOGGING = "true"                 # 是否启用用户行为日志记录

# 邮箱验证功能配置
EMAIL_VERIFICATION_ENABLED = "true"            # 是否启用邮箱验证系统
EMAIL_VERIFICATION_REQUIRED = "false"          # 注册时是否强制要求邮箱验证
VERIFICATION_CODE_LENGTH = "6"                 # 验证码位数（6位数字）
VERIFICATION_CODE_EXPIRY = "900000"            # 验证码过期时间（毫秒，15分钟=900000）
MAX_VERIFICATION_ATTEMPTS = "3"                # 单个验证码最大尝试次数
EMAIL_RATE_LIMIT_PER_HOUR = "5"               # 同一邮箱/IP每小时最大发送次数
EMAIL_RATE_LIMIT_PER_DAY = "20"               # 同一邮箱/IP每天最大发送次数
DEFAULT_FROM_EMAIL = "noreply@tempemail.pp.ua" # 系统发送邮件的发件人邮箱地址
DEFAULT_FROM_NAME = "磁力快搜"                  # 系统发送邮件的发件人显示名称
SITE_URL = "https://tempemail.pp.ua"          # 网站域名（用于邮件中的链接和引用）

# JWT令牌配置
JWT_EXPIRY_DAYS = "30"                         # JWT令牌有效期（天）

# 社区功能配置
COMMUNITY_REQUIRE_APPROVAL = "false"           # 社区分享的搜索源是否需要管理员审核

# 搜索源状态检查配置
ENABLE_SOURCE_STATUS_CHECK = "true"            # 是否启用搜索源状态自动检查功能
SOURCE_STATUS_CHECK_TIMEOUT = "10000"          # 单个搜索源状态检查超时时间（毫秒，10秒）
SOURCE_STATUS_CACHE_DURATION = "300000"        # 状态检查结果缓存时间（毫秒，5分钟=300000）

# 数据库配置
[[d1_databases]]
binding = "DB"                                  # 在代码中使用的数据库实例名称
database_name = "codeseek"                     # Cloudflare D1 数据库名称
database_id = "42216a7e-3dbb-4feb-9974-2a8ee32af550"  # 数据库唯一标识符

# 监控和可观测性配置
[observability]
enabled = true                                 # 启用 Cloudflare 的监控和日志功能

