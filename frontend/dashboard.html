<div class="menu-item" data-tab="settings">
                    <span class="menu-icon">??</span>
                    <span class="menu-text">设置</span>
                </div>
                <div class="menu-item" data-tab="stats">
                    <span class="menu-icon">??</span>
                    <span class="menu-text">统计</span>
                </div>
            </div>
        </aside>

        <!-- 主内容区域 -->
        <div class="main-content">
            <!-- 概览标签页 -->
            <div id="overview" class="tab-content active">
                <div class="tab-header">
                    <h1>用户概览</h1>
                    <p>欢迎回来，管理您的搜索和收藏</p>
                </div>

                <!-- 统计卡片 -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">??</div>
                        <div class="stat-info">
                            <div class="stat-number" id="totalSearches">0</div>
                            <div class="stat-label">总搜索次数</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">?</div>
                        <div class="stat-info">
                            <div class="stat-number" id="totalFavorites">0</div>
                            <div class="stat-label">收藏数量</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">??</div>
                        <div class="stat-info">
                            <div class="stat-number" id="activeDays">0</div>
                            <div class="stat-label">活跃天数</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">??</div>
                        <div class="stat-info">
                            <div class="stat-number" id="userLevel">新手</div>
                            <div class="stat-label">用户等级</div>
                        </div>
                    </div>
                </div>

                <!-- 快速操作 -->
                <div class="quick-actions">
                    <h2>快速操作</h2>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="window.location.href='index.html'">
                            <span class="btn-icon">??</span>
                            <span>开始搜索</span>
                        </button>
                        <button class="action-btn" onclick="switchTab('favorites')">
                            <span class="btn-icon">?</span>
                            <span>查看收藏</span>
                        </button>
                        <button class="action-btn" onclick="syncAllData()">
                            <span class="btn-icon">??</span>
                            <span>同步数据</span>
                        </button>
                        <button class="action-btn" onclick="exportData()">
                            <span class="btn-icon">??</span>
                            <span>导出数据</span>
                        </button>
                    </div>
                </div>

                <!-- 最近活动 -->
                <div class="content-section">
                    <h2 class="section-title">?? 最近活动</h2>
                    <div id="activityList" class="activity-list">
                        <!-- 活动列表将通过JavaScript动态加载 -->
                        <div class="empty-state">
                            <span class="emoji">??</span>
                            <h3>暂无活动记录</h3>
                            <p>开始使用应用后，您的活动记录将在这里显示</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 收藏标签页 -->
            <div id="favorites" class="tab-content">
                <div class="tab-header">
                    <h1>我的收藏</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="syncFavorites()">?? 同步收藏</button>
                        <button class="btn btn-secondary" onclick="exportFavorites()">?? 导出收藏</button>
                    </div>
                </div>

                <!-- 收藏搜索和过滤 -->
                <div class="favorites-controls">
                    <div class="search-box">
                        <input type="text" id="favoritesSearch" placeholder="搜索收藏..." autocomplete="off">
                        <button onclick="searchFavorites()" title="搜索">??</button>
                    </div>
                    <div class="filter-options">
                        <select id="favoritesSort">
                            <option value="date-desc">按日期排序（新→旧）</option>
                            <option value="date-asc">按日期排序（旧→新）</option>
                            <option value="name-asc">按名称排序（A→Z）</option>
                            <option value="name-desc">按名称排序（Z→A）</option>
                        </select>
                    </div>
                </div>

                <!-- 收藏列表 -->
                <div class="content-section">
                    <div id="favoritesList" class="favorites-list">
                        <!-- 收藏项将通过JavaScript动态加载 -->
                        <div class="empty-state">
                            <span class="emoji">?</span>
                            <h3>暂无收藏</h3>
                            <p>开始搜索并收藏您喜欢的内容吧</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 搜索历史标签页 -->
            <div id="history" class="tab-content">
                <div class="tab-header">
                    <h1>搜索历史</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="syncHistory()">?? 同步历史</button>
                        <button class="btn btn-danger" onclick="clearAllHistory()">??? 清空历史</button>
                    </div>
                </div>

                <!-- 历史搜索和统计 -->
                <div class="content-section">
                    <div class="history-stats">
                        <div class="stat-item">
                            <span class="stat-value" id="historyCount">0</span>
                            <span class="stat-desc">搜索记录</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="uniqueKeywords">0</span>
                            <span class="stat-desc">不同关键词</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="avgPerDay">0</span>
                            <span class="stat-desc">日均搜索</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="topKeyword">-</span>
                            <span class="stat-desc">热门关键词</span>
                        </div>
                    </div>
                </div>

                <!-- 历史记录列表 -->
                <div class="content-section">
                    <div class="history-controls">
                        <input type="text" id="historySearch" placeholder="搜索历史记录..." autocomplete="off">
                        <select id="historyTimeFilter">
                            <option value="all">全部时间</option>
                            <option value="today">今天</option>
                            <option value="week">本周</option>
                            <option value="month">本月</option>
                        </select>
                    </div>

                    <div id="historyList" class="history-list">
                        <!-- 历史记录将通过JavaScript动态加载 -->
                        <div class="empty-state">
                            <span class="emoji">??</span>
                            <h3>暂无搜索历史</h3>
                            <p>开始搜索后，您的搜索历史将在这里显示</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 设置标签页 -->
            <div id="settings" class="tab-content">
                <div class="tab-header">
                    <h1>用户设置</h1>
                    <p>个性化您的使用体验</p>
                </div>

                <div class="settings-sections">
                    <!-- 基本设置 -->
                    <div class="settings-section">
                        <h3>?? 基本设置</h3>
                        <div class="setting-item">
                            <label>自动同步</label>
                            <div class="setting-control">
                                <input type="checkbox" id="autoSync" checked>
                                <span class="setting-desc">搜索和收藏自动同步到云端</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>搜索缓存</label>
                            <div class="setting-control">
                                <input type="checkbox" id="enableCache" checked>
                                <span class="setting-desc">启用搜索结果缓存，提升加载速度</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>主题模式</label>
                            <div class="setting-control">
                                <select id="themeMode">
                                    <option value="auto">跟随系统</option>
                                    <option value="light">浅色模式</option>
                                    <option value="dark">深色模式</option>
                                </select>
                                <span class="setting-desc">选择您喜欢的界面主题</span>
                            </div>
                        </div>
                    </div>

                    <!-- 搜索设置 -->
                    <div class="settings-section">
                        <h3>?? 搜索设置</h3>
                        <div class="setting-item">
                            <label>默认搜索源</label>
                            <div class="setting-control">
                                <div class="checkbox-group">
                                    <label><input type="checkbox" value="javbus" checked> JavBus</label>
                                    <label><input type="checkbox" value="javdb" checked> JavDB</label>
                                    <label><input type="checkbox" value="javlibrary" checked> JavLibrary</label>
                                    <label><input type="checkbox" value="av01"> AV01</label>
                                    <label><input type="checkbox" value="missav"> MissAV</label>
                                </div>
                                <span class="setting-desc">选择默认使用的搜索源</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>搜索历史保留</label>
                            <div class="setting-control">
                                <select id="historyRetention">
                                    <option value="30">30天</option>
                                    <option value="90" selected>90天</option>
                                    <option value="365">1年</option>
                                    <option value="-1">永久保留</option>
                                </select>
                                <span class="setting-desc">搜索历史自动清理时间</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>最大收藏数量</label>
                            <div class="setting-control">
                                <input type="number" id="maxFavorites" value="500" min="100" max="2000" step="100">
                                <span class="setting-desc">收藏夹最大容量限制</span>
                            </div>
                        </div>
                    </div>

                    <!-- 隐私设置 -->
                    <div class="settings-section">
                        <h3>?? 隐私设置</h3>
                        <div class="setting-item">
                            <label>行为统计</label>
                            <div class="setting-control">
                                <input type="checkbox" id="allowAnalytics" checked>
                                <span class="setting-desc">允许收集匿名使用统计，帮助改进产品</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>搜索建议</label>
                            <div class="setting-control">
                                <input type="checkbox" id="searchSuggestions" checked>
                                <span class="setting-desc">基于历史记录提供搜索建议</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>数据加密</label>
                            <div class="setting-control">
                                <input type="checkbox" id="encryptData" checked>
                                <span class="setting-desc">对本地存储的数据进行加密</span>
                            </div>
                        </div>
                    </div>

                    <!-- 账户操作 -->
                    <div class="settings-section">
                        <h3>?? 账户操作</h3>
                        <div class="dangerous-actions">
                            <button class="btn btn-warning" onclick="changePassword()">?? 修改密码</button>
                            <button class="btn btn-danger" onclick="clearAllData()">??? 清空所有数据</button>
                            <button class="btn btn-danger" onclick="deleteAccount()">? 删除账户</button>
                        </div>
                    </div>

                    <!-- 保存设置 -->
                    <div class="settings-actions">
                        <button class="btn btn-primary" onclick="saveSettings()">?? 保存设置</button>
                        <button class="btn btn-secondary" onclick="resetSettings()">?? 重置默认</button>
                    </div>
                </div>
            </div>

            <!-- 统计标签页 -->
            <div id="stats" class="tab-content">
                <div class="tab-header">
                    <h1>使用统计</h1>
                    <p>查看您的使用数据和趋势</p>
                </div>

                <!-- 时间范围选择 -->
                <div class="stats-controls">
                    <div class="time-range-selector">
                        <button class="time-btn active" data-range="7">近7天</button>
                        <button class="time-btn" data-range="30">近30天</button>
                        <button class="time-btn" data-range="90">近90天</button>
                        <button class="time-btn" data-range="365">近一年</button>
                    </div>
                </div>

                <!-- 统计图表 -->
                <div class="charts-container">
                    <div class="chart-section">
                        <h3>?? 搜索活动趋势</h3>
                        <div id="searchTrendChart" class="chart-placeholder">
                            <p>?? 搜索趋势图表区域</p>
                        </div>
                    </div>

                    <div class="chart-section">
                        <h3>?? 热门搜索关键词</h3>
                        <div id="topKeywordsChart" class="chart-placeholder">
                            <div class="top-keywords-list" id="topKeywordsList">
                                <div style="padding: 2rem; text-align: center; color: var(--text-secondary);">
                                    暂无数据
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 详细统计 -->
                <div class="content-section">
                    <div class="detailed-stats">
                        <h3 class="section-title">?? 详细数据</h3>
                        <div class="stats-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>指标</th>
                                        <th>数值</th>
                                        <th>趋势</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody id="detailedStatsTable">
                                    <tr>
                                        <td>总搜索次数</td>
                                        <td id="totalSearchesStat">-</td>
                                        <td>??</td>
                                        <td>累计搜索次数</td>
                                    </tr>
                                    <tr>
                                        <td>平均每日搜索</td>
                                        <td id="avgDailySearches">-</td>
                                        <td>??</td>
                                        <td>每天平均搜索次数</td>
                                    </tr>
                                    <tr>
                                        <td>收藏转化率</td>
                                        <td id="favoriteConversionRate">-</td>
                                        <td>?</td>
                                        <td>搜索到收藏的转化率</td>
                                    </tr>
                                    <tr>
                                        <td>活跃时段</td>
                                        <td id="mostActiveHour">-</td>
                                        <td>??</td>
                                        <td>最常使用的时间段</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 修改密码模态框 -->
    <div id="passwordModal" class="modal" aria-labelledby="password-title" role="dialog" aria-modal="true">
        <div class="modal-content">
            <span class="close" aria-label="关闭">&times;</span>
            <h2 id="password-title">?? 修改密码</h2>
            <form id="passwordForm" novalidate>
                <div class="form-group">
                    <input type="password" id="currentPassword" placeholder="当前密码" required autocomplete="current-password">
                </div>
                <div class="form-group">
                    <input type="password" id="newPassword" placeholder="新密码" required autocomplete="new-password">
                </div>
                <div class="form-group">
                    <input type="password" id="confirmNewPassword" placeholder="确认新密码" required autocomplete="new-password">
                </div>
                <button type="submit" class="submit-btn">修改密码</button>
            </form>
        </div>
    </div>

    <!-- Toast通知 -->
    <div id="toast" class="toast" role="alert" aria-live="polite">
        <span class="toast-message"></span>
    </div>

    <!-- Loading -->
    <div id="loading" class="loading" style="display:none;" aria-label="加载中">
        <div class="spinner"></div>
        <div class="loading-text">加载中...</div>
    </div>

    <!-- JavaScript -->
    <script>
        // 全局工具函数
        const Utils = {
            showToast(message, type = 'info', duration = 3000) {
                const toast = document.getElementById('toast');
                const toastMessage = toast.querySelector('.toast-message');
                
                toastMessage.textContent = message;
                toast.className = `toast ${type}`;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, duration);
            },

            showLoading(text = '加载中...') {
                const loading = document.getElementById('loading');
                const loadingText = loading.querySelector('.loading-text');
                loadingText.textContent = text;
                loading.style.display = 'flex';
            },

            hideLoading() {
                document.getElementById('loading').style.display = 'none';
            },

            formatDate(date) {
                return new Intl.DateTimeFormat('zh-CN', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                }).format(new Date(date));
            },

            generateId() {
                return Date.now().toString(36) + Math.random().toString(36).substr(2);
            },

            storage: {
                get(key, defaultValue = null) {
                    try {
                        const item = localStorage.getItem(key);
                        return item ? JSON.parse(item) : defaultValue;
                    } catch (e) {
                        console.error('Storage get error:', e);
                        return defaultValue;
                    }
                },

                set(key, value) {
                    try {
                        localStorage.setItem(key, JSON.stringify(value));
                        return true;
                    } catch (e) {
                        console.error('Storage set error:', e);
                        return false;
                    }
                },

                remove(key) {
                    try {
                        localStorage.removeItem(key);
                        return true;
                    } catch (e) {
                        console.error('Storage remove error:', e);
                        return false;
                    }
                }
            }
        };

        // 主题管理
        class ThemeManager {
            constructor() {
                this.currentTheme = 'light';
                this.init();
            }

            init() {
                this.loadTheme();
                this.bindEvents();
            }

            loadTheme() {
                const savedTheme = Utils.storage.get('theme', 'auto');
                this.applyTheme(savedTheme);
            }

            applyTheme(theme) {
                if (theme === 'auto') {
                    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    theme = prefersDark ? 'dark' : 'light';
                }

                document.documentElement.setAttribute('data-theme', theme);
                this.currentTheme = theme;
                this.updateThemeIcon();
                Utils.storage.set('theme', theme);
            }

            updateThemeIcon() {
                const themeIcon = document.getElementById('themeIcon');
                if (themeIcon) {
                    themeIcon.textContent = this.currentTheme === 'dark' ? '??' : '??';
                }
            }

            toggle() {
                const newTheme = this.currentTheme === 'dark' ? 'light' : 'dark';
                this.applyTheme(newTheme);
                
                document.body.style.transition = 'background-color 0.3s ease';
                setTimeout(() => {
                    document.body.style.transition = '';
                }, 300);
            }

            bindEvents() {
                const themeToggle = document.getElementById('themeToggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', () => this.toggle());
                }
            }
        }

        // Dashboard应用主类
        class DashboardApp {
            constructor() {
                this.currentTab = 'overview';
                this.mockData = this.generateMockData();
                this.init();
            }

            init() {
                this.bindEvents();
                this.loadStatistics();
                this.loadFavorites();
                this.loadHistory();
                this.updateActivity();
                this.initSettings();
                
                // 初始化主题管理器
                this.themeManager = new ThemeManager();
            }

            generateMockData() {
                return {
                    searches: Utils.storage.get('searchHistory', []),
                    favorites: Utils.storage.get('favorites', []),
                    stats: {
                        totalSearches: Math.floor(Math.random() * 500) + 50,
                        totalFavorites: Math.floor(Math.random() * 50) + 5,
                        activeDays: Math.floor(Math.random() * 30) + 1,
                        userLevel: '活跃用户'
                    },
                    activities: [
                        { type: 'search', content: '搜索了 "MIAA-123"', time: new Date(Date.now() - 1000 * 60 * 30) },
                        { type: 'favorite', content: '收藏了新内容', time: new Date(Date.now() - 1000 * 60 * 60 * 2) },
                        { type: 'login', content: '登录系统', time: new Date(Date.now() - 1000 * 60 * 60 * 4) }
                    ]
                };
            }

            bindEvents() {
                // 标签页切换
                document.querySelectorAll('.menu-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        const tab = e.currentTarget.dataset.tab;
                        if (tab) {
                            this.switchTab(tab);
                        }
                    });
                });

                // 时间范围选择
                document.querySelectorAll('.time-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
                        e.currentTarget.classList.add('active');
                        this.updateStats(e.currentTarget.dataset.range);
                    });
                });

                // 模态框相关
                document.querySelectorAll('.close').forEach(btn => {
                    btn.addEventListener('click', () => this.hideModals());
                });

                window.addEventListener('click', (e) => {
                    if (e.target.classList.contains('modal')) {
                        this.hideModals();
                    }
                });

                // 登出按钮
                const logoutBtn = document.getElementById('logoutBtn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.logout();
                    });
                }
            }

            switchTab(tabName) {
                // 移除所有active状态
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelectorAll('.menu-item').forEach(item => {
                    item.classList.remove('active');
                });

                // 添加新的active状态
                const targetTab = document.getElementById(tabName);
                const targetMenuItem = document.querySelector(`[data-tab="${tabName}"]`);
                
                if (targetTab) {
                    targetTab.classList.add('active');
                }
                if (targetMenuItem) {
                    targetMenuItem.classList.add('active');
                }

                this.currentTab = tabName;

                // 根据不同标签页加载数据
                switch (tabName) {
                    case 'favorites':
                        this.loadFavorites();
                        break;
                    case 'history':
                        this.loadHistory();
                        break;
                    case 'stats':
                        this.loadStatistics();
                        break;
                }
            }

            loadStatistics() {
                const stats = this.mockData.stats;
                
                // 更新统计卡片
                document.getElementById('totalSearches').textContent = stats.totalSearches;
                document.getElementById('totalFavorites').textContent = stats.totalFavorites;
                document.getElementById('activeDays').textContent = stats.activeDays;
                document.getElementById('userLevel').textContent = stats.userLevel;

                // 更新详细统计表格
                document.getElementById('totalSearchesStat').textContent = stats.totalSearches;
                document.getElementById('avgDailySearches').textContent = Math.round(stats.totalSearches / Math.max(stats.activeDays, 1));
                document.getElementById('favoriteConversionRate').textContent = `${Math.round((stats.totalFavorites / stats.totalSearches) * 100)}%`;
                document.getElementById('mostActiveHour').textContent = '14:00-18:00';
            }

            loadFavorites() {
                const favoritesList = document.getElementById('favoritesList');
                const favorites = this.mockData.favorites;

                if (!favoritesList) return;

                if (favorites.length === 0) {
                    favoritesList.innerHTML = `
                        <div class="empty-state">
                            <span class="emoji">?</span>
                            <h3>暂无收藏</h3>
                            <p>开始搜索并收藏您喜欢的内容吧</p>
                        </div>
                    `;
                    return;
                }

                favoritesList.innerHTML = '';
                favorites.slice(0, 10).forEach((favorite, index) => {
                    const favoriteElement = this.createFavoriteElement(favorite, index);
                    favoritesList.appendChild(favoriteElement);
                });
            }

            createFavoriteElement(favorite, index) {
                const div = document.createElement('div');
                div.className = 'favorite-item';
                div.style.animation = `slideInUp 0.6s ease ${index * 0.1}s forwards`;
                
                div.innerHTML = `
                    <div class="favorite-content">
                        <div class="favorite-title">
                            <span class="favorite-icon">??</span>
                            <span class="favorite-name">${favorite.title || `收藏项目 ${index + 1}`}</span>
                        </div>
                        <div class="favorite-subtitle">${favorite.subtitle || '精彩内容，值得收藏'}</div>
                        <div class="favorite-url">${favorite.url || 'https://example.com/item/' + (index + 1)}</div>
                        <div class="favorite-meta">
                            <span>收藏时间：${Utils.formatDate(favorite.favoriteTime || new Date())}</span>
                            <span>类型：视频</span>
                        </div>
                    </div>
                    <div class="favorite-actions">
                        <button class="btn btn-primary" onclick="window.open('${favorite.url || '#'}', '_blank')">
                            ?? 访问
                        </button>
                        <button class="btn btn-danger" onclick="dashboardApp.removeFavorite('${favorite.id || Utils.generateId()}')">
                            ??? 移除
                        </button>
                    </div>
                `;

                return div;
            }

            loadHistory() {
                const historyList = document.getElementById('historyList');
                const searches = this.mockData.searches;

                // 更新历史统计
                const historyCount = searches.length;
                const uniqueKeywords = new Set(searches.map(s => s.query)).size;
                const avgPerDay = Math.round(historyCount / Math.max(this.mockData.stats.activeDays, 1) * 10) / 10;
                const topKeyword = this.getTopKeyword(searches);

                document.getElementById('historyCount').textContent = historyCount;
                document.getElementById('uniqueKeywords').textContent = uniqueKeywords;
                document.getElementById('avgPerDay').textContent = avgPerDay;
                document.getElementById('topKeyword').textContent = topKeyword;

                if (!historyList) return;

                if (searches.length === 0) {
                    historyList.innerHTML = `
                        <div class="empty-state">
                            <span class="emoji">??</span>
                            <h3>暂无搜索历史</h3>
                            <p>开始搜索后，您的搜索历史将在这里显示</p>
                        </div>
                    `;
                    return;
                }

                historyList.innerHTML = '';
                searches.slice(0, 20).forEach((search, index) => {
                    const historyElement = this.createHistoryElement(search, index);
                    historyList.appendChild(historyElement);
                });
            }

            createHistoryElement(search, index) {
                const div = document.createElement('div');
                div.className = 'history-item';
                div.style.animation = `slideInUp 0.4s ease ${index * 0.05}s forwards`;
                
                div.innerHTML = `
                    <div class="history-content">
                        <div class="history-keyword">${search.query}</div>
                        <div class="history-time">${Utils.formatDate(search.timestamp)}</div>
                    </div>
                    <div class="history-actions">
                        <button class="btn btn-primary" onclick="window.open('index.html?q=${encodeURIComponent(search.query)}', '_blank')">
                            ?? 重新搜索
                        </button>
                    </div>
                `;

                return div;
            }

            getTopKeyword(searches) {
                if (searches.length === 0) return '-';
                
                const keywordCount = {};
                searches.forEach(search => {
                    keywordCount[search.query] = (keywordCount[search.query] || 0) + 1;
                });

                const sortedKeywords = Object.entries(keywordCount)
                    .sort((a, b) => b[1] - a[1]);

                return sortedKeywords.length > 0 ? sortedKeywords[0][0] : '-';
            }

            updateActivity() {
                const activityList = document.getElementById('activityList');
                if (!activityList) return;

                const activities = this.mockData.activities;

                if (activities.length === 0) {
                    activityList.innerHTML = `
                        <div class="empty-state">
                            <span class="emoji">??</span>
                            <h3>暂无活动记录</h3>
                            <p>开始使用应用后，您的活动记录将在这里显示</p>
                        </div>
                    `;
                    return;
                }

                activityList.innerHTML = activities.map((activity, index) => `
                    <div class="activity-item" style="animation: slideInUp 0.5s ease ${index * 0.1}s forwards;">
                        <div class="activity-icon">${this.getActivityIcon(activity.type)}</div>
                        <div class="activity-content">
                            <div class="activity-text">${activity.content}</div>
                            <div class="activity-time">${Utils.formatDate(activity.time)}</div>
                        </div>
                    </div>
                `).join('');
            }

            getActivityIcon(type) {
                const icons = {
                    search: '??',
                    favorite: '?',
                    login: '??',
                    setting: '??'
                };
                return icons[type] || '??';
            }

            initSettings() {
                // 加载保存的设置
                const settings = Utils.storage.get('user_settings', {});
                
                // 应用设置到UI
                Object.entries(settings).forEach(([key, value]) => {
                    const element = document.getElementById(key);
                    if (element) {
                        if (element.type === 'checkbox') {
                            element.checked = value;
                        } else {
                            element.value = value;
                        }
                    }
                });
            }

            removeFavorite(id) {
                if (confirm('确定要移除这个收藏吗？')) {
                    // 模拟移除操作
                    Utils.showToast('收藏已移除', 'success');
                    this.loadFavorites();
                }
            }

            updateStats(range) {
                Utils.showLoading('更新统计数据...');
                
                setTimeout(() => {
                    // 模拟数据更新
                    Utils.hideLoading();
                    Utils.showToast(`已更新近${range}天的统计数据`, 'success');
                }, 1000);
            }

            hideModals() {
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.style.display = 'none';
                });
            }

            logout() {
                if (confirm('确定要退出登录吗？')) {
                    Utils.storage.remove('auth_token');
                    Utils.storage.remove('user_data');
                    Utils.showToast('已退出登录', 'info');
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 1000);
                }
            }
        }

        // 全局函数
        function switchTab(tabName) {
            if (window.dashboardApp) {
                window.dashboardApp.switchTab(tabName);
            }
        }

        function syncAllData() {
            Utils.showLoading('正在同步数据...');
            setTimeout(() => {
                Utils.hideLoading();
                Utils.showToast('数据同步成功', 'success');
            }, 2000);
        }

        function exportData() {
            const data = {
                favorites: Utils.storage.get('favorites', []),
                searchHistory: Utils.storage.get('searchHistory', []),
                settings: Utils.storage.get('user_settings', {}),
                exportTime: new Date().toISOString()
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `magnetSearch-backup-${new Date().getTime()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            Utils.showToast('数据导出成功', 'success');
        }

        function syncFavorites() {
            Utils.showLoading('正在同步收藏...');
            setTimeout(() => {
                Utils.hideLoading();
                Utils.showToast('收藏同步成功', 'success');
            }, 1500);
        }

        function exportFavorites() {
            const favorites = Utils.storage.get('favorites', []);
            if (favorites.length === 0) {
                Utils.showToast('暂无收藏数据', 'warning');
                return;
            }

            const blob = new Blob([JSON.stringify(favorites, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `favorites-${new Date().getTime()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            Utils.showToast('收藏导出成功', 'success');
        }

        function searchFavorites() {
            const query = document.getElementById('favoritesSearch').value.trim();
            if (query) {
                Utils.showToast(`搜索收藏: "${query}"`, 'info');
                // 这里应该实现实际的搜索逻辑
            }
        }

        function syncHistory() {
            Utils.showLoading('正在同步历史...');
            setTimeout(() => {
                Utils.hideLoading();
                Utils.showToast('历史同步成功', 'success');
            }, 1500);
        }

        function clearAllHistory() {
            if (confirm('确定要清空所有搜索历史吗？此操作不可撤销！')) {
                Utils.storage.remove('searchHistory');
                Utils.showToast('搜索历史已清空', 'success');
                if (window.dashboardApp) {
                    window.dashboardApp.loadHistory();
                }
            }
        }

        function changePassword() {
            const modal = document.getElementById('passwordModal');
            if (modal) {
                modal.style.display = 'block';
            }
        }

        function saveSettings() {
            const settings = {};
            
            // 收集所有设置
            document.querySelectorAll('#settings input, #settings select').forEach(input => {
                if (input.id) {
                    if (input.type === 'checkbox') {
                        settings[input.id] = input.checked;
                    } else {
                        settings[input.id] = input.value;
                    }
                }
            });

            Utils.storage.set('user_settings', settings);
            Utils.showToast('设置已保存', 'success');
            
            // 应用主题设置
            const themeMode = settings.themeMode;
            if (themeMode && window.dashboardApp && window.dashboardApp.themeManager) {
                window.dashboardApp.themeManager.applyTheme(themeMode);
            }
        }

        function resetSettings() {
            if (confirm('确定要重置所有设置为默认值吗？')) {
                Utils.storage.remove('user_settings');
                Utils.showToast('设置已重置', 'success');
                setTimeout(() => {
                    location.reload();
                }, 1000);
            }
        }

        function clearAllData() {
            if (confirm('警告：此操作将清空所有本地数据，包括收藏、历史记录和设置。确定要继续吗？')) {
                if (confirm('这是最后确认，清空后数据无法恢复！')) {
                    ['favorites', 'searchHistory', 'user_settings'].forEach(key => {
                        Utils.storage.remove(key);
                    });
                    Utils.showToast('所有数据已清空', 'success');
                    setTimeout(() => {
                        location.reload();
                    }, 1500);
                }
            }
        }

        function deleteAccount() {
            if (confirm('警告：删除账户将永久删除所有数据，此操作不可撤销！')) {
                if (confirm('请再次确认删除账户操作：')) {
                    Utils.showLoading('正在删除账户...');
                    setTimeout(() => {
                        Utils.storage.clear();
                        Utils.hideLoading();
                        Utils.showToast('账户已删除', 'info');
                        setTimeout(() => {
                            window.location.href = 'index.html';
                        }, 2000);
                    }, 3000);
                }
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', () => {
            console.log('?? Dashboard初始化...');

            // 检查登录状态
            const authToken = Utils.storage.get('auth_token');
            if (!authToken) {
                Utils.showToast('请先登录', 'warning');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 2000);
                return;
            }

            // 更新页面标题和品牌名称
            const appName = '磁力快搜';
            document.getElementById('page-title').textContent = `用户面板 - ${appName}`;
            document.getElementById('brand-text').textContent = appName;

            // 创建Dashboard应用实例
            window.dashboardApp = new DashboardApp();

            // 修改密码表单处理
            const passwordForm = document.getElementById('passwordForm');
            if (passwordForm) {
                passwordForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const currentPassword = document.getElementById('currentPassword').value;
                    const newPassword = document.getElementById('newPassword').value;
                    const confirmPassword = document.getElementById('confirmNewPassword').value;

                    if (!currentPassword || !newPassword || !confirmPassword) {
                        Utils.showToast('请填写完整信息', 'warning');
                        return;
                    }

                    if (newPassword.length < 8) {
                        Utils.showToast('新密码长度至少8个字符', 'warning');
                        return;
                    }

                    if (newPassword !== confirmPassword) {
                        Utils.showToast('两次输入的密码不一致', 'warning');
                        return;
                    }

                    Utils.showLoading('正在修改密码...');
                    
                    // 模拟API调用
                    setTimeout(() => {
                        Utils.hideLoading();
                        Utils.showToast('密码修改成功', 'success');
                        
                        // 关闭模态框并重置表单
                        window.dashboardApp.hideModals();
                        passwordForm.reset();
                    }, 2000);
                });
            }

            console.log('? Dashboard初始化完成');
        });

        // 页面卸载时的清理工作
        window.addEventListener('beforeunload', () => {
            // 保存当前状态
            if (window.dashboardApp) {
                const currentState = {
                    currentTab: window.dashboardApp.currentTab,
                    lastVisit: new Date().toISOString()
                };
                Utils.storage.set('dashboard_state', currentState);
            }
        });

        // 页面可见性变化处理
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden && window.dashboardApp) {
                // 页面重新可见时，刷新数据
                window.dashboardApp.loadStatistics();
                window.dashboardApp.updateActivity();
            }
        });
    </script>
</body>
</html><!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">用户面板 - 磁力快搜</title>
    <meta name="description" content="磁力快搜用户面板，管理收藏，查看搜索历史，个性化设置">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* 继承主样式的CSS变量 */
        :root {
            --primary: #6366f1;
            --primary-dark: #4338ca;
            --primary-light: #e0e7ff;
            --secondary: #f3f4f6;
            --accent: #10b981;
            --accent-hover: #059669;
            --warning: #f59e0b;
            --danger: #ef4444;
            --success: #22c55e;
            
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --bg-card: rgba(255, 255, 255, 0.9);
            --bg-glass: rgba(255, 255, 255, 0.1);
            
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            
            --border: #e2e8f0;
            --border-light: #f1f5f9;
            
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.15s ease-out;
            --transition-bounce: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            
            --sidebar-width: 280px;
        }

        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-card: rgba(30, 41, 59, 0.9);
            --bg-glass: rgba(255, 255, 255, 0.05);
            
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            
            --border: #374151;
            --border-light: #4b5563;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text-primary);
            line-height: 1.6;
            transition: var(--transition);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* 导航栏 */
        .navbar {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: var(--transition);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
            height: 70px;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition);
        }

        .logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .nav-link {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            transition: var(--transition);
        }

        .nav-link:hover {
            background: var(--primary-light);
            color: var(--primary);
        }

        .theme-btn {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 50%;
            transition: var(--transition-bounce);
            color: var(--text-primary);
        }

        .theme-btn:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.1) rotate(15deg);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
        }

        .username {
            font-weight: 600;
            color: var(--text-primary);
        }

        .dropdown {
            position: relative;
        }

        .dropdown-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            color: var(--text-secondary);
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .dropdown-content {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            min-width: 180px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition);
        }

        .dropdown:hover .dropdown-content {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-content a {
            display: block;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            text-decoration: none;
            transition: var(--transition);
            border-radius: var(--radius-md);
            margin: 0.25rem;
        }

        .dropdown-content a:hover,
        .dropdown-content a.active {
            background: var(--primary-light);
            color: var(--primary);
            transform: translateX(4px);
        }

        /* Dashboard容器 */
        .dashboard-container {
            display: flex;
            min-height: calc(100vh - 70px);
            max-width: 1400px;
            margin: 0 auto;
            gap: 2rem;
            padding: 2rem;
        }

        /* 侧边栏 */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-2xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-md);
            padding: 1.5rem 0;
            height: fit-content;
            position: sticky;
            top: 90px;
            transition: var(--transition);
        }

        .sidebar:hover {
            box-shadow: var(--shadow-lg);
        }

        .sidebar-menu {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding: 0 1rem;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: var(--transition-bounce);
            border-radius: var(--radius-lg);
            color: var(--text-secondary);
            font-weight: 500;
            margin: 0.25rem 0;
        }

        .menu-item:hover {
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
            transform: translateX(4px) scale(1.02);
        }

        .menu-item.active {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .menu-icon {
            font-size: 1.5rem;
            margin-right: 1rem;
            width: 2rem;
            text-align: center;
        }

        .menu-text {
            font-size: 1rem;
        }

        /* 主内容区 */
        .main-content {
            flex: 1;
            min-width: 0;
        }

        /* 标签页内容 */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        .tab-header {
            margin-bottom: 2rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-2xl);
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-md);
        }

        .tab-header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.75rem;
            background: var(--gradient-primary);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .tab-header p {
            color: var(--text-secondary);
            font-size: 1.2rem;
            font-weight: 400;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        /* 统计卡片 */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-xl);
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 1.5rem;
            transition: var(--transition-bounce);
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        .stat-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            font-size: 3rem;
            padding: 1rem;
            background: var(--gradient-accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-md);
        }

        .stat-info {
            flex: 1;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 500;
        }

        /* 快速操作 */
        .quick-actions {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-2xl);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-md);
        }

        .quick-actions h2 {
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            font-size: 1.75rem;
            font-weight: 700;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            cursor: pointer;
            transition: var(--transition-bounce);
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            box-shadow: var(--shadow-sm);
        }

        .action-btn:hover {
            background: var(--gradient-primary);
            color: white;
            transform: translateY(-2px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .btn-icon {
            font-size: 1.75rem;
        }

        /* 按钮样式 */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition-bounce);
            border: none;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: var(--shadow-sm);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* 内容区域 */
        .content-section {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-2xl);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .content-section:hover {
            box-shadow: var(--shadow-lg);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        /* 收藏夹控件 */
        .favorites-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            display: flex;
            gap: 0.5rem;
            position: relative;
        }

        .search-box input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.95rem;
            transition: var(--transition);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .search-box button {
            padding: 0.75rem 1rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-options select {
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        /* 列表样式 */
        .favorites-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .favorite-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .favorite-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary);
        }

        .favorite-content {
            margin-bottom: 1.5rem;
        }

        .favorite-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .favorite-icon {
            font-size: 1.5rem;
        }

        .favorite-name {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .favorite-subtitle {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 0.75rem;
            line-height: 1.5;
        }

        .favorite-url {
            color: var(--text-muted);
            font-size: 0.85rem;
            word-break: break-all;
            padding: 0.75rem;
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            border-left: 3px solid var(--primary);
            font-family: 'Courier New', monospace;
        }

        .favorite-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 1rem;
        }

        .favorite-actions {
            display: flex;
            gap: 0.75rem;
        }

        .favorite-actions .btn {
            flex: 1;
            padding: 0.5rem;
            font-size: 0.85rem;
            justify-content: center;
        }

        /* 历史记录 */
        .history-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .stat-item {
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .stat-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .stat-value {
            display: block;
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .history-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .history-controls input,
        .history-controls select {
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .history-controls input {
            flex: 1;
            min-width: 200px;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            transition: var(--transition);
        }

        .history-item:hover {
            transform: translateX(4px);
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .history-content {
            flex: 1;
        }

        .history-keyword {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .history-time {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .history-actions .btn {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        /* 设置页面 */
        .settings-sections {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .settings-section {
            background: var(--bg-secondary);
            border-radius: var(--radius-xl);
            padding: 2rem;
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .settings-section:hover {
            box-shadow: var(--shadow-md);
        }

        .settings-section h3 {
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            font-size: 1.25rem;
            font-weight: 700;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid var(--primary);
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 1.5rem 0;
            border-bottom: 1px solid var(--border);
            gap: 2rem;
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-item label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1rem;
            flex-shrink: 0;
            min-width: 120px;
        }

        .setting-control {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.75rem;
        }

        .setting-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: right;
            max-width: 300px;
            line-height: 1.5;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            padding: 0.5rem;
            border-radius: var(--radius-md);
            transition: var(--transition);
        }

        .checkbox-group label:hover {
            background: var(--bg-tertiary);
        }

        .dangerous-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            padding: 2rem 0;
        }

        .settings-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            padding: 2rem 0;
            flex-wrap: wrap;
        }

        /* 统计页面 */
        .stats-controls {
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
        }

        .time-range-selector {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            background: var(--bg-secondary);
            padding: 0.5rem;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
        }

        .time-btn {
            padding: 0.75rem 1.25rem;
            background: transparent;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-primary);
            font-weight: 600;
        }

        .time-btn:hover {
            background: var(--bg-tertiary);
        }

        .time-btn.active {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .chart-section {
            background: var(--bg-secondary);
            border-radius: var(--radius-xl);
            padding: 2rem;
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .chart-section:hover {
            box-shadow: var(--shadow-md);
        }

        .chart-section h3 {
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            font-size: 1.25rem;
            font-weight: 700;
        }

        .chart-placeholder {
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-tertiary);
            border-radius: var(--radius-lg);
            color: var(--text-secondary);
            font-size: 1.1rem;
            font-weight: 500;
        }

        .detailed-stats {
            background: var(--bg-secondary);
            border-radius: var(--radius-xl);
            padding: 2rem;
            border: 1px solid var(--border);
        }

        .stats-table table {
            width: 100%;
            border-collapse: collapse;
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .stats-table th,
        .stats-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .stats-table th {
            font-weight: 700;
            color: var(--text-primary);
            background: var(--bg-tertiary);
            font-size: 0.95rem;
        }

        .stats-table td {
            color: var(--text-secondary);
        }

        /* 模态框 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            padding: 2.5rem;
            border-radius: var(--radius-2xl);
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .modal-content h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--text-primary);
            font-size: 1.75rem;
            font-weight: 700;
        }

        .close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted);
            transition: var(--transition);
            padding: 0.5rem;
            border-radius: 50%;
            background: var(--bg-secondary);
        }

        .close:hover {
            color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
            transform: scale(1.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group input {
            width: 100%;
            padding: 1rem 1.25rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            transition: var(--transition-bounce);
            box-shadow: var(--shadow-md);
        }

        .submit-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        /* Toast通知 */
        .toast {
            position: fixed;
            top: 30px;
            right: 30px;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            color: var(--text-primary);
            padding: 1.25rem 1.75rem;
            border-radius: var(--radius-lg);
            z-index: 2001;
            transform: translateX(400px);
            transition: var(--transition-bounce);
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border);
            min-width: 300px;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            background: var(--danger);
            color: white;
        }

        .toast.success {
            background: var(--success);
            color: white;
        }

        .toast.warning {
            background: var(--warning);
            color: white;
        }

        /* Loading动画 */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2002;
            flex-direction: column;
            gap: 1.5rem;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* 空状态 */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-secondary);
        }

        .empty-state .emoji {
            font-size: 4rem;
            margin-bottom: 1rem;
            display: block;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
            font-weight: 700;
        }

        .empty-state p {
            font-size: 1.1rem;
            line-height: 1.6;
            max-width: 400px;
            margin: 0 auto;
        }

        /* 动画 */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { 
                transform: translate(-50%, -60%); 
                opacity: 0; 
                scale: 0.9;
            }
            to { 
                transform: translate(-50%, -50%); 
                opacity: 1; 
                scale: 1;
            }
        }

        @keyframes slideInUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* 响应式设计 */
        @media (max-width: 1024px) {
            .dashboard-container {
                flex-direction: column;
                padding: 1rem;
                gap: 1rem;
            }
            
            .sidebar {
                width: 100%;
                position: static;
                order: 2;
            }
            
            .sidebar-menu {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 0.5rem;
                padding: 0 1rem;
                overflow-x: auto;
            }
            
            .menu-item {
                flex-direction: column;
                text-align: center;
                padding: 1rem 0.5rem;
                min-height: 80px;
                justify-content: center;
            }

            .menu-item:hover {
                transform: translateY(-2px) scale(1.02);
            }
            
            .menu-icon {
                margin-right: 0;
                margin-bottom: 0.5rem;
                font-size: 1.25rem;
            }
            
            .menu-text {
                font-size: 0.85rem;
            }
            
            .main-content {
                order: 1;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .action-buttons {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                padding: 0 1rem;
            }
            
            .nav-brand .brand-text {
                font-size: 1.25rem;
            }
            
            .dashboard-container {
                padding: 0.5rem;
            }
            
            .tab-header {
                padding: 1.5rem;
            }
            
            .tab-header h1 {
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .stat-card {
                flex-direction: column;
                text-align: center;
                padding: 1.5rem;
            }
            
            .favorites-controls,
            .history-controls {
                flex-direction: column;
            }
            
            .header-actions,
            .dangerous-actions,
            .settings-actions {
                flex-direction: column;
            }
            
            .charts-container {
                grid-template-columns: 1fr;
            }
            
            .setting-item {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }
            
            .setting-control {
                align-items: stretch;
            }
            
            .setting-desc {
                text-align: left;
                max-width: none;
            }

            .modal-content {
                width: 95%;
                padding: 2rem;
                margin: 1rem;
            }

            .sidebar-menu {
                grid-template-columns: repeat(3, 1fr);
                padding: 0.5rem;
            }

            .menu-item {
                min-height: 70px;
                padding: 0.75rem 0.5rem;
            }

            .menu-text {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .tab-header h1 {
                font-size: 1.75rem;
            }
            
            .nav-container {
                height: 60px;
            }
            
            .nav-menu {
                gap: 1rem;
            }
            
            .content-section {
                padding: 1.5rem;
            }
            
            .stat-card {
                padding: 1rem;
            }
            
            .stat-icon {
                font-size: 2.5rem;
                padding: 0.75rem;
            }
            
            .stat-number {
                font-size: 2rem;
            }
            
            .favorites-list {
                grid-template-columns: 1fr;
            }
            
            .history-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            
            .time-range-selector {
                flex-direction: column;
                width: 100%;
            }

            .sidebar-menu {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* 打印样式 */
        @media print {
            .sidebar,
            .navbar,
            .modal,
            .toast,
            .loading {
                display: none !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .dashboard-container {
                flex-direction: column;
                padding: 0;
            }
            
            .main-content {
                padding: 0;
            }
            
            .content-section {
                background: white !important;
                border: 1px solid black !important;
                box-shadow: none !important;
                page-break-inside: avoid;
            }
        }

        /* 高对比度支持 */
        @media (prefers-contrast: high) {
            :root {
                --border: #000000;
                --text-secondary: #000000;
            }
            
            [data-theme="dark"] {
                --border: #ffffff;
                --text-secondary: #ffffff;
            }
        }

        /* 减少动画支持 */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <div class="logo">M</div>
                <span class="brand-text" id="brand-text">磁力快搜</span>
            </div>
            <div class="nav-menu">
                <a href="./index.html" class="nav-link">?? 首页</a>
                <button id="themeToggle" class="theme-btn" title="切换主题" aria-label="切换主题">
                    <span id="themeIcon">??</span>
                </button>
                <div id="userInfo" class="user-info">
                    <span id="username" class="username">Demo用户</span>
                    <div class="dropdown">
                        <button class="dropdown-btn" title="用户菜单" aria-label="用户菜单"></button>
                        <div class="dropdown-content" role="menu">
                            <a href="#" class="dropdown-item active" role="menuitem">?? 个人中心</a>
                            <a href="#" id="logoutBtn" class="dropdown-item" role="menuitem">?? 退出登录</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <main class="dashboard-container">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <div class="sidebar-menu">
                <div class="menu-item active" data-tab="overview">
                    <span class="menu-icon">??</span>
                    <span class="menu-text">概览</span>
                </div>
                <div class="menu-item" data-tab="favorites">
                    <span class="menu-icon">?</span>
                    <span class="menu-text">我的收藏</span>
                </div>
                <div class="menu-item" data-tab="history">
                    <span class="menu-icon">??</span>
                    <span class="menu-text">搜索历史</span>
                </div>
                <div class="menu-item" data-tab="settings">
                    <span class="menu-icon">??</span>